{% comment %}
  OS 2.0 Footer section (sample-theme style)
  - Top: newsletter + 3 link columns
  - Middle: 5 category link columns
  - Big slogan
  - Bottom bar: copyright + payment icons
{% endcomment %}

<footer class="ft" role="contentinfo">
  <div class="ft__inner page-width">

    {%- if section.settings.show_newsletter or section.settings.show_top_columns -%}
      <div class="ft__top">
        {%- if section.settings.show_newsletter -%}
          <div class="ft__newsletter">
            {%- if section.settings.newsletter_kicker != blank -%}
              <div class="ft__kicker">{{ section.settings.newsletter_kicker }}</div>
            {%- endif -%}
            {%- if section.settings.newsletter_heading != blank -%}
              <h2 class="ft__heading">{{ section.settings.newsletter_heading }}</h2>
            {%- endif -%}
          </div>

          <div class="ft__newsletter-form">
            {%- form 'customer', id: 'FooterNewsletter', class: 'ft__form' -%}
              <input type="hidden" name="contact[tags]" value="newsletter">
              <label class="visually-hidden" for="FooterNewsletterEmail">{{ 'newsletter.label' | t | default: 'Email' }}</label>
              <input
                id="FooterNewsletterEmail"
                class="ft__input"
                type="email"
                name="contact[email]"
                autocomplete="email"
                placeholder="{{ section.settings.newsletter_placeholder | escape }}"
                required
              >
              <button class="ft__btn" type="submit">
                {{ section.settings.newsletter_button | escape }}
              </button>

              {%- if form.posted_successfully? -%}
                <p class="ft__msg ft__msg--success">{{ 'newsletter.success' | t | default: 'Thanks for subscribing!' }}</p>
              {%- elsif form.errors -%}
                <p class="ft__msg ft__msg--error">{{ form.errors.messages['email'] | default: 'Please enter a valid email.' }}</p>
              {%- endif -%}
            {%- endform -%}
          </div>
        {%- endif -%}

        {%- if section.settings.show_top_columns -%}
          <div class="ft__top-cols">
            {%- for block in section.blocks -%}
              {%- if block.type == 'top_menu' -%}
                <div class="ft__col" {{ block.shopify_attributes }}>
                  {%- if block.settings.title != blank -%}
                    <h3 class="ft__col-title">{{ block.settings.title }}</h3>
                  {%- endif -%}

                  {%- assign menu = block.settings.menu -%}
                  {%- if menu != blank and menu.links.size > 0 -%}
                    <ul class="ft__links" role="list">
                      {%- for link in menu.links -%}
                        <li class="ft__item">
                          <a class="ft__link" href="{{ link.url }}">{{ link.title | escape }}</a>
                        </li>
                      {%- endfor -%}
                    </ul>
                  {%- endif -%}
                </div>
              {%- endif -%}
            {%- endfor -%}
          </div>
        {%- endif -%}
      </div>
    {%- endif -%}

    <div class="ft__middle">
      <div class="ft__brand">
        {%- if section.settings.logo != blank -%}
          <a class="ft__logo" href="{{ routes.root_url }}" aria-label="{{ shop.name | escape }}">
            {{ section.settings.logo | image_url: width: 420 | image_tag: loading: 'lazy', widths: '200,260,320,420', alt: shop.name }}
          </a>
        {%- else -%}
          <a class="ft__brand-name" href="{{ routes.root_url }}">{{ shop.name | escape }}</a>
        {%- endif -%}

        {%- if section.settings.phone != blank -%}
          <div class="ft__phone">{{ section.settings.phone | escape }}</div>
        {%- endif -%}

        <div class="ft__contact">
          {%- if section.settings.address != blank -%}
            <div class="ft__meta"><strong>Address:</strong> {{ section.settings.address | escape }}</div>
          {%- endif -%}
          {%- if section.settings.email != blank -%}
            <div class="ft__meta"><strong>Email:</strong> <a class="ft__link" href="mailto:{{ section.settings.email | escape }}">{{ section.settings.email | escape }}</a></div>
          {%- endif -%}
          {%- if section.settings.hours != blank -%}
            <div class="ft__meta"><strong>Mon-Sat:</strong> {{ section.settings.hours | escape }}</div>
          {%- endif -%}
        </div>
      </div>

      <div class="ft__cats">
        {%- for block in section.blocks -%}
          {%- if block.type == 'category_menu' -%}
            <div class="ft__cat" {{ block.shopify_attributes }}>
              {%- if block.settings.title != blank -%}
                <h3 class="ft__cat-title">{{ block.settings.title }}</h3>
              {%- endif -%}

              {%- assign menu = block.settings.menu -%}
              {%- if menu != blank and menu.links.size > 0 -%}
                <ul class="ft__links" role="list">
                  {%- for link in menu.links -%}
                    <li class="ft__item">
                      <a class="ft__link" href="{{ link.url }}">{{ link.title | escape }}</a>
                    </li>
                  {%- endfor -%}
                </ul>
              {%- endif -%}
            </div>
          {%- endif -%}
        {%- endfor -%}
      </div>
    </div>

    {%- if section.settings.slogan != blank -%}
      <div class="ft__slogan">
        <div class="ft__slogan-text">{{ section.settings.slogan }}</div>
      </div>
    {%- endif -%}

    <div class="ft__bottom">
      <div class="ft__copyright">
        <small>
          &copy; {{ 'now' | date: '%Y' }}, {{ shop.name | escape }}.
          {%- if section.settings.show_powered_by -%}
            {{ powered_by_link }}
          {%- endif -%}
        </small>
      </div>

      {%- if section.settings.show_payment_icons and shop.enabled_payment_types.size > 0 -%}
        <ul class="ft__payments" role="list" aria-label="Payment methods">
          {%- for type in shop.enabled_payment_types -%}
            <li class="ft__pay">{{ type | payment_type_svg_tag: class: 'ft__pay-icon' }}</li>
          {%- endfor -%}
        </ul>
      {%- endif -%}
    </div>
  </div>

  <style>
    .ft{background: #f6f2ea;}
    .ft__inner{padding: 48px 0 24px;}
    .ft__top{display:grid;grid-template-columns: 1.2fr 1.8fr;gap: 24px;align-items:center;margin-bottom: 28px;}
    .ft__newsletter{max-width: 520px;}
    .ft__kicker{font-size: 12px;letter-spacing:.02em;margin-bottom: 6px;}
    .ft__heading{font-size: 20px;line-height: 1.2;margin:0;}
    .ft__newsletter-form{justify-self:end;width: min(720px, 100%);}
    .ft__form{display:flex;gap: 10px;align-items:center;}
    .ft__input{flex:1;min-width: 220px;border:1px solid rgba(0,0,0,.14);border-radius: 6px;padding: 12px 14px;background:#fff;}
    .ft__btn{border:0;border-radius: 6px;padding: 12px 16px;cursor:pointer;background:#0b5cab;color:#fff;font-weight:600;}
    .ft__msg{margin: 10px 0 0;font-size: 13px;}
    .ft__msg--success{opacity:.9;}
    .ft__msg--error{color:#b42318;}

    .ft__top-cols{display:grid;grid-template-columns: repeat(3, minmax(160px, 1fr));gap: 34px;justify-self:end;width: min(840px, 100%);}
    .ft__col-title{font-size: 14px;margin: 0 0 10px;font-weight: 700;}
    .ft__links{margin:0;padding:0;list-style:none;}
    .ft__item{margin: 0 0 8px;}
    .ft__link{text-decoration:none;color: inherit;opacity:.85;}
    .ft__link:hover{opacity:1;text-decoration:underline;}

    .ft__middle{display:grid;grid-template-columns: 1.1fr 2fr;gap: 40px;margin-top: 10px;}
    .ft__brand{max-width: 420px;}
    .ft__brand-name{font-size: 34px;font-weight: 800;text-decoration:none;color:inherit;display:inline-block;margin-bottom: 10px;}
    .ft__logo img{height:auto;max-width: 240px;display:block;}
    .ft__phone{font-size: 18px;font-weight: 700;margin: 12px 0;}
    .ft__contact .ft__meta{font-size: 12px;opacity:.9;margin: 4px 0;}
    .ft__cats{display:grid;grid-template-columns: repeat(5, minmax(150px, 1fr));gap: 34px;align-content:start;}
    .ft__cat-title{font-size: 14px;margin: 0 0 10px;font-weight: 700;}

    .ft__slogan{padding: 36px 0 10px;text-align:center;}
    .ft__slogan-text{font-size: clamp(26px, 4vw, 56px);font-weight: 700;line-height:1.05;}

    .ft__bottom{display:flex;justify-content:space-between;align-items:center;border-top: 1px solid rgba(0,0,0,.1);padding-top: 14px;margin-top: 18px;gap: 14px;flex-wrap:wrap;}
    .ft__payments{display:flex;gap: 10px;align-items:center;justify-content:flex-end;margin:0;padding:0;list-style:none;}
    .ft__pay-icon{height: 22px;width:auto;display:block;}

    @media (max-width: 990px){
      .ft__top{grid-template-columns: 1fr;align-items:start;}
      .ft__newsletter-form{justify-self:start;}
      .ft__top-cols{grid-template-columns: repeat(3, 1fr);justify-self:start;}
      .ft__middle{grid-template-columns: 1fr;gap: 24px;}
      .ft__cats{grid-template-columns: repeat(2, minmax(140px, 1fr));}
    }
    @media (max-width: 640px){
      .ft__form{flex-direction:column;align-items:stretch;}
      .ft__input{min-width: 0;width:100%;}
      .ft__top-cols{grid-template-columns: 1fr;gap: 18px;}
      .ft__cats{grid-template-columns: 1fr;gap: 18px;}
      .ft__slogan{padding: 26px 0 10px;}
    }
  </style>
</footer>

{% schema %}
{
  "name": "Footer (Sample style)",
  "settings": [
    { "type": "checkbox", "id": "show_newsletter", "label": "Show newsletter", "default": true },
    { "type": "text", "id": "newsletter_kicker", "label": "Newsletter kicker", "default": "Join our newsletter" },
    { "type": "text", "id": "newsletter_heading", "label": "Newsletter heading", "default": "Get all latest information on events, sales and offers." },
    { "type": "text", "id": "newsletter_placeholder", "label": "Email placeholder", "default": "Your email" },
    { "type": "text", "id": "newsletter_button", "label": "Button label", "default": "Subscribe" },

    { "type": "checkbox", "id": "show_top_columns", "label": "Show top menu columns", "default": true },

    { "type": "image_picker", "id": "logo", "label": "Footer logo" },
    { "type": "text", "id": "phone", "label": "Phone", "default": "(+84) 123 4567 89" },
    { "type": "text", "id": "address", "label": "Address", "default": "75 9th Ave, New York, NY 10011-7006" },
    { "type": "text", "id": "email", "label": "Email", "default": "support@example.com" },
    { "type": "text", "id": "hours", "label": "Hours", "default": "9:00pm - 5:00pm" },

    { "type": "richtext", "id": "slogan", "label": "Big slogan", "default": "<p>This is everything you need in your pantry!</p>" },

    { "type": "checkbox", "id": "show_powered_by", "label": "Show Powered by Shopify", "default": true },
    { "type": "checkbox", "id": "show_payment_icons", "label": "Show payment icons", "default": true }
  ],
  "blocks": [
    {
      "type": "top_menu",
      "name": "Top column menu",
      "limit": 3,
      "settings": [
        { "type": "text", "id": "title", "label": "Title", "default": "Company" },
        { "type": "link_list", "id": "menu", "label": "Menu" }
      ]
    },
    {
      "type": "category_menu",
      "name": "Category menu",
      "limit": 5,
      "settings": [
        { "type": "text", "id": "title", "label": "Title", "default": "Meat & Fish" },
        { "type": "link_list", "id": "menu", "label": "Menu" }
      ]
    }
  ],
  "max_blocks": 8,
  "presets": [{ "name": "Footer (Sample style)" }]
}
{% endschema %}
